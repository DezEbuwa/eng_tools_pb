Yes, you can modify the Python script to accept the file path as an argument, allowing you to pass in the SBOM file dynamically from the pipeline. This makes your script more flexible and reusable.

### Step 1: Modify the Python script to accept input and output file paths.

Here’s the updated `filter_sbom.py`:

```python
import json
import sys

def filter_sbom(input_file, output_file):
    # Load the SBOM file
    with open(input_file, "r") as f:
        sbom_data = json.load(f)

    # Filter out components with type 'operating-system'
    filtered_components = [
        component for component in sbom_data["components"]
        if component["type"] != "operating-system"
    ]

    # Replace the components in the SBOM
    sbom_data["components"] = filtered_components

    # Save the modified SBOM to a new file
    with open(output_file, "w") as f:
        json.dump(sbom_data, f, indent=4)

    print(f"Filtered SBOM saved as '{output_file}'")

if __name__ == "__main__":
    # Expecting two arguments: input file and output file
    if len(sys.argv) != 3:
        print("Usage: python filter_sbom.py <input_file> <output_file>")
        sys.exit(1)

    input_file = sys.argv[1]
    output_file = sys.argv[2]

    filter_sbom(input_file, output_file)
```

This script now expects two arguments: the input SBOM file and the output file where the filtered SBOM will be saved.

### Step 2: Update your `.gitlab-ci.yml` to pass file paths to the script.

Here’s the updated `.gitlab-ci.yml`:

```yaml
stages:
  - sbom

generate_sbom:
  stage: sbom
  image: python:3.10
  script:
    - echo "Generating SBOM with Syft..."
    - syft yourimage:latest -o cyclonedx-json > sbom-output.json
    - echo "Filtering out operating-system components..."
    - python3 scripts/filter_sbom.py sbom-output.json filtered-sbom-output.json  # Pass input and output files to the script
  artifacts:
    paths:
      - filtered-sbom-output.json  # Save the filtered SBOM as an artifact
    expire_in: 1 week
  before_script:
    - pip install -r requirements.txt  # Install any Python dependencies if needed
```

### Explanation of the Changes:
1. **Python script**: The `filter_sbom.py` script now accepts two command-line arguments: the input SBOM file and the output file for the filtered SBOM.
   
2. **CI/CD Pipeline**: When the pipeline runs, it passes `sbom-output.json` (the file generated by Syft) to the script as the input, and `filtered-sbom-output.json` as the output file.

This will ensure that the SBOM file is processed dynamically, and you can easily adjust file paths in the pipeline without needing to modify the script itself.

Let me know if that fits your needs!
